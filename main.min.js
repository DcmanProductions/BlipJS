/* LFInteractive LLC. All Rights Reserved */
async function closeAllPopups(){$("html")[0].style.overflow="";let e=$(".popup")[0];e.classList.remove("open"),await new Promise(e=>setTimeout(e,500)),e.innerHTML=""}async function Navigate(e="home",t="index",s={}){let a=new LoadingScreen;page={controller:e,view:t,model:s};let n=`/@pages/${e}/${t}.html`,l=await $.get(n);$("main")[0].innerHTML=l,await InitPageLoad(),a.close()}async function InitPageLoad(){let e=new LoadingScreen;await async function(){!function(){let e=document.createElement("link");e.href="main.min.css",e.rel="stylesheet",$("head")[0].appendChild(e),(e=document.createElement("link")).rel="stylesheet",e.href="@libraries/fontawesome/css/all.min.css",$("head")[0].appendChild(e)}(),await async function(){let e=Array.from($("section"));for(let t=0;t<e.length;t++){let s=e[t];if(""!=s.id&&null!=s.id){let e=`/@pages/${page.controller}/@sections/${s.id}.html`,t=await $.get(e);s.innerHTML=t}}}(),Array.from($("video-player")).forEach(e=>{let t=$(e).attr("src"),s=$(e).attr("id"),a=$(e).attr("poster"),n=$(e).attr("class"),l=document.createElement("div");l.classList.add("video-player"),null!=n&&l.classList.add(n.split(" ")),null!=s&&(l.id=s);let r=document.createElement("video");r.src=t,null!=a&&(r.poster=a);let i=document.createElement("div");i.classList.add("controls");let o=document.createElement("div");o.classList.add("progress");let c=document.createElement("span");c.classList.add("preview");let d=document.createElement("span");d.classList.add("track");let u=document.createElement("span");u.classList.add("hover"),o.appendChild(c),o.appendChild(d),o.appendChild(u);let p=document.createElement("div");p.classList.add("row","control-buttons");let m=document.createElement("i");m.classList.add("play"),m.title="play/pause";let h=document.createElement("p");h.classList.add("4","video-track-timestamp");let f=document.createElement("span");f.classList.add("current-timestamp");let v=document.createElement("span");v.classList.add("total-timestamp");let L=document.createElement("i");L.classList.add("mute-button","fa-solid","fa-volume-up"),L.title="mute/unmute";let g=document.createElement("i");g.classList.add("fullscreen-btn","fa-solid","fa-expand"),g.title="toggle fullscreen",h.appendChild(f),h.append("/"),h.appendChild(v),p.appendChild(m),p.appendChild(h),i.appendChild(o),i.appendChild(p),i.appendChild(L),i.appendChild(g),l.appendChild(r),l.appendChild(i),e.outerHTML=l.outerHTML}),Array.from($(".video-player")).forEach(e=>{function t(){document.fullscreen?document.exitFullscreen():e.requestFullscreen()}function s(){o.paused?(o.play(),c.classList.add("pause"),c.classList.remove("play"),p=setInterval(()=>n(),100),i=setInterval(()=>{l()},1e3)):(a(),n())}function a(){o.pause(),c.classList.add("play"),c.classList.remove("pause"),r(),clearInterval(p),clearInterval(i)}function n(){try{let t=new Date(1e3*o.currentTime).toISOString().substr(11,8),s=new Date(1e3*o.duration).toISOString().substr(11,8),a=o.currentTime/o.duration*100;$(e).find(".current-timestamp")[0].innerText=t,$(e).find(".total-timestamp")[0].innerText=s,h||($(e).find(".progress .track")[0].style.maxWidth=`${a}%`)}catch{}}function l(){e.classList.remove("show")}function r(){e.classList.add("show")}let i=null,o=$(e).find("video")[0];o.paused&&r();let c=$(e).find(".play")[0],d=$(e).find(".fullscreen-btn")[0],u=$(e).find(".mute-button")[0],p=setInterval(()=>n(),500),m=$(e).find(".preview")[0],h=!1;m.style.display="none",$(c).on("click",()=>s()),$(o).on("click",()=>s()),$(o).on("dblclick",()=>t()),$(d).on("click",()=>t()),$(d).on("click",()=>t()),$(u).on("click",()=>{o.muted=!o.muted,o.muted?(u.classList.add("fa-volume-mute"),u.classList.remove("fa-volume-up")):(u.classList.add("fa-volume-up"),u.classList.remove("fa-volume-mute"))}),$(e).contextmenu(e=>{e.preventDefault()}),n(),$(e).find(".progress").on("click",t=>{let s=$(e).find(".progress")[0].getBoundingClientRect(),a=(t.clientX-s.left)/s.width*100,n=a*o.duration/100;o.currentTime=n,$(e).find(".progress .track")[0].style.transition="unset",$(e).find(".progress .track")[0].style.maxWidth=`${a}%`,setTimeout(()=>{$(e).find(".progress .track")[0].style.transition=""},500)}),$(e).find(".progress").on("mousedown",()=>{h=!0}),$(document).on("mouseup",()=>{h=!1}),$(e).attr("tabindex",0),$(e).on("keydown",e=>{switch(e.preventDefault(),e.key){case" ":s();break;case"f":t();break;case"m":o.muted=!o.muted,o.muted?(u.classList.add("fa-volume-mute"),u.classList.remove("fa-volume-up")):(u.classList.add("fa-volume-up"),u.classList.remove("fa-volume-mute"));break;case"ArrowRight":o.currentTime>o.duration-10?(a(),o.currentTime=0,n()):o.currentTime+=10,n();break;case"ArrowLeft":10>o.currentTime?o.currentTime=0:o.currentTime-=10,n();break;case"ArrowDown":.1>o.volume?(o.mute=!0,u.classList.add("fa-volume-mute"),u.classList.remove("fa-volume-up")):o.volume-=.1,n();break;case"ArrowUp":o.mute=!1,o.volume>.9?o.volume=1:o.volume+=.1,u.classList.add("fa-volume-up"),u.classList.remove("fa-volume-mute"),n()}}),$(e).on("mousemove",t=>{if(h){let s=$(e).find(".progress .track")[0],a=$(e).find(".progress")[0],n=a.getBoundingClientRect(),l=(t.clientX-n.left)/n.width*100;s.style.transition="unset",s.style.maxWidth=`${l}%`,setTimeout(()=>{s.style.transition=""},500)}}),$(e).find(".progress").on("mousemove",t=>{let s=$(e).find(".progress")[0].getBoundingClientRect(),a=(t.clientX-s.left)/s.width*100;$(e).find(".progress .hover")[0].style.maxWidth=`${a}%`;let n=a*o.duration/100,l=new Date(1e3*n).toISOString().substr(11,8);m.innerText=l,m.style.display="",m.style.left=`calc(${a}% - ${m.getBoundingClientRect().width/2}px)`}),$(e).find(".progress").on("mouseleave",()=>{m.style.display="none",$(e).find(".progress .hover")[0].style.maxWidth="0%"}),$(o).on("mousemove",()=>{o.paused||(r(),null!=i&&clearInterval(i),i=setInterval(()=>{o.paused||l()},3e3))}),$(e).on("mouseleave",()=>{o.paused||r(),null!=i&&clearInterval(i)})}),function(){let e=document.createElement("div");e.classList.add("popup"),$("body")[0].appendChild(e),Array.from($("a")).forEach(e=>{let t=e.href;null!=t&&(t.startsWith(window.location.origin)||(e.title=`External Link: ${t}`,e.href="#",$(e).on("click",()=>{let e=new ExternalLinkPopup(t);e.open()})))}),Array.from($("toggle")).forEach(e=>{$(e).attr("value",null==$(e).attr("value")?"false":$(e).attr("value")),$(e).on("click",()=>{$(e).attr("value","false"==$(e).attr("value")),e.dispatchEvent(new t("true"==$(e).attr("value")))})}),Array.from($("dropdown")).forEach(e=>{$(e).attr("tabindex",0),$(e).attr("name",$(e).find("dropdown-name")[0].innerText),Array.from($(e).find("dropdown-item")).forEach(t=>{$(t).on("click",()=>{if(t.classList.contains("selected"))t.classList.remove("selected"),$(e).find("dropdown-name")[0].innerText=$(e).attr("name"),e.dispatchEvent(new s(null));else{Array.from($(e).find("dropdown-item")).forEach(e=>{e.classList.remove("selected")});let a=$(t).attr("value");a=null==a?t.innerText:a,t.classList.add("selected"),$(e).find("dropdown-name")[0].innerText=t.innerText,e.dispatchEvent(new s(a))}e.blur()})}),$(e).on("dropdown",e=>{})})}()}(),e.close();class t extends Event{constructor(e){super("toggle",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class s extends Event{constructor(e){super("dropdown",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}}class Popup{constructor(e){this.name=e,this.classes=[]}async open(){let e=$(".popup")[0],t=document.createElement("div");t.classList.add("popup-body"),this.classes.forEach(e=>t.classList.add(e)),$(e).on("click",e=>{e.target.classList.contains("popup")&&closeAllPopups()}),""!=e.innerHTML&&(await this.close(),e.innerHTML=""),$("html")[0].style.overflow="hidden";let s=`/@popups/${this.name}.html`,a=await $.get(s);return t.innerHTML=a,e.appendChild(t),await new Promise(e=>setTimeout(e,100)),e.classList.add("open"),t}async close(){await closeAllPopups()}}class CurtainPopup extends Popup{constructor(e){super(e),this.classes.push("curtain")}}class CurtainWithBorderPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","border")}}class CenteredLargeCurtainPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallCurtainPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","small")}}class CurtainWithTitlePopup extends CurtainPopup{constructor(e){super(e),this.classes.push("title")}}class CenteredLargeCurtainWithTitlePopup extends CurtainWithTitlePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallCurtainWithTitlePopup extends CurtainWithTitlePopup{constructor(e){super(e),this.classes.push("centered","small")}}class FadePopup extends Popup{constructor(e){super(e),this.classes.push("fade")}}class FadeWithBorderPopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","border")}}class CenteredLargeFadePopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallFadePopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","small")}}class FadeWithTitlePopup extends FadePopup{constructor(e){super(e),this.classes.push("title")}}class CenteredLargeFadeWithTitlePopup extends FadeWithTitlePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallFadeWithTitlePopup extends FadeWithTitlePopup{constructor(e){super(e),this.classes.push("centered","small")}}class LoadingScreen{constructor(e=null,t=null){$("html")[0].style.overflow="hidden",e=null==e?"Loading...":e,t=null==t?"This could take a moment...":t;let s=document.createElement("div");s.classList.add("loading");let a=document.createElement("h1");a.innerHTML=e;let n=document.createElement("p");n.innerHTML=t,n.classList.add("1");let l=document.createElement("span");l.classList.add("spinner"),l.style.width="100px",s.appendChild(a),s.appendChild(n),s.appendChild(l),$("body")[0].appendChild(s),setTimeout(()=>s.classList.add("active"),100),this.screen=s}async close(){$("html")[0].style.overflow="",this.screen.classList.remove("active"),await new Promise(e=>setTimeout(e,500)),this.screen.remove()}}var page={controller:null,view:null,model:{}};