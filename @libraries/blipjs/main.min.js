/* LFInteractive LLC. All Rights Reserved */
async function closeAllPopups(){$("html")[0].style.overflow="",$("nav")[0].classList.remove("hidden");let e=$(".popup")[0];e.classList.remove("open"),await new Promise(e=>setTimeout(e,500)),e.innerHTML=""}function BuildPage(){window.location.search.replaceAll("?","").split("&").forEach(e=>{let t=e.split("=")[0],s=e.split("=")[1];switch(t){case"controller":page.controller=s;break;case"view":page.view=s;break;default:let e=`{"${t}": "${s}"}`;Object.assign(page.model,JSON.parse(e))}})}async function NavBack(){await Navigate(lastpage.controller,lastpage.view,lastpage.model)}async function Navigate(e="home",t="index",s={}){let a=new LoadingScreen;lastpage=page,page={controller:e,view:t,model:s};let l=`@pages/${e}/${t}.html`,n=await $.get(l),r=Object.keys(s),i=Object.values(s),o="";for(let e=0;e<r.length;e++){let t=r[e],s=i[e];null!=t&&null!=s&&(o+=`&${t}=${s}`,n.toLowerCase().includes(`{${t.toLowerCase()}}`)&&(n=n.replaceAll("{src}",s)))}window.history.pushState("","",`?controller=${e}&view=${t}${o}`),$("main")[0].innerHTML=n,await InitPageLoad(),a.close()}async function InitPageLoad(){await async function(){await async function(){let e=Array.from($("page-item"));for(let t=0;t<e.length;t++){let s=e[t],a=`@pages/@shared/${$(s).attr("page")}.html`,l=await $.get(a);s.outerHTML=l}let t=Array.from($("section"));for(let e=0;e<t.length;e++){let s=t[e];if(""!=s.id&&null!=s.id){let e=`@pages/${page.controller}/@sections/${s.id}.html`,t=await $.get(e);s.innerHTML=t}}}(),async function(){let e=$("nav.fixed.animated")[0];null!=e&&(window.scrollY>5?e.classList.add("collapsed"):e.classList.remove("collapsed"),$(document).on("scroll",()=>{window.scrollY>5?e.classList.add("collapsed"):e.classList.remove("collapsed")}))}(),async function(){Array.from($("video-player")).forEach(e=>{let t=$(e).attr("src"),s=$(e).attr("id"),a=$(e).attr("poster"),l=$(e).attr("class"),n=document.createElement("div");n.classList.add("video-player"),null!=l&&n.classList.add(l.split(" ")),null!=s&&(n.id=s);let r=document.createElement("video");r.src=t,null!=a&&(r.poster=a);let i=document.createElement("div");i.classList.add("controls");let o=document.createElement("div");o.classList.add("progress");let c=document.createElement("span");c.classList.add("preview");let d=document.createElement("span");d.classList.add("track");let u=document.createElement("span");u.classList.add("hover"),o.appendChild(c),o.appendChild(d),o.appendChild(u);let p=document.createElement("div");p.classList.add("row","control-buttons");let m=document.createElement("i");m.classList.add("play"),m.title="play/pause";let h=document.createElement("p");h.classList.add("4","video-track-timestamp");let v=document.createElement("span");v.classList.add("current-timestamp");let f=document.createElement("span");f.classList.add("total-timestamp");let g=document.createElement("i");g.classList.add("mute-button","fa-solid","fa-volume-up"),g.title="mute/unmute";let w=document.createElement("i");w.classList.add("fullscreen-btn","fa-solid","fa-expand"),w.title="toggle fullscreen",h.appendChild(v),h.append("/"),h.appendChild(f),p.appendChild(m),p.appendChild(h),i.appendChild(o),i.appendChild(p),i.appendChild(g),i.appendChild(w),n.appendChild(r),n.appendChild(i),e.outerHTML=n.outerHTML}),Array.from($(".video-player")).forEach(e=>{function t(){document.fullscreen?document.exitFullscreen():e.requestFullscreen()}function s(){o.paused?(o.play(),c.classList.add("pause"),c.classList.remove("play"),p=setInterval(()=>l(),100),i=setInterval(()=>{n()},1e3)):(a(),l())}function a(){o.pause(),c.classList.add("play"),c.classList.remove("pause"),r(),clearInterval(p),clearInterval(i)}function l(){try{let t=new Date(1e3*o.currentTime).toISOString().substr(11,8),s=new Date(1e3*o.duration).toISOString().substr(11,8),a=o.currentTime/o.duration*100;$(e).find(".current-timestamp")[0].innerText=t,$(e).find(".total-timestamp")[0].innerText=s,h||($(e).find(".progress .track")[0].style.maxWidth=`${a}%`)}catch{}}function n(){e.classList.remove("show")}function r(){e.classList.add("show")}let i=null,o=$(e).find("video")[0];o.paused&&r();let c=$(e).find(".play")[0],d=$(e).find(".fullscreen-btn")[0],u=$(e).find(".mute-button")[0],p=setInterval(()=>l(),500),m=$(e).find(".preview")[0],h=!1;m.style.display="none",$(c).on("click",()=>s()),$(o).on("click",()=>s()),$(o).on("dblclick",()=>t()),$(d).on("click",()=>t()),$(d).on("click",()=>t()),$(u).on("click",()=>{o.muted=!o.muted,o.muted?(u.classList.add("fa-volume-mute"),u.classList.remove("fa-volume-up")):(u.classList.add("fa-volume-up"),u.classList.remove("fa-volume-mute"))}),$(e).contextmenu(e=>{e.preventDefault()}),l(),$(e).find(".progress").on("click",t=>{let s=$(e).find(".progress")[0].getBoundingClientRect(),a=(t.clientX-s.left)/s.width*100,l=a*o.duration/100;o.currentTime=l,$(e).find(".progress .track")[0].style.transition="unset",$(e).find(".progress .track")[0].style.maxWidth=`${a}%`,setTimeout(()=>{$(e).find(".progress .track")[0].style.transition=""},500)}),$(e).find(".progress").on("mousedown",()=>{h=!0}),$(document).on("mouseup",()=>{h=!1}),$(e).attr("tabindex",0),$(e).on("keydown",e=>{switch(e.preventDefault(),e.key){case" ":s();break;case"f":t();break;case"m":o.muted=!o.muted,o.muted?(u.classList.add("fa-volume-mute"),u.classList.remove("fa-volume-up")):(u.classList.add("fa-volume-up"),u.classList.remove("fa-volume-mute"));break;case"ArrowRight":o.currentTime>o.duration-10?(a(),o.currentTime=0,l()):o.currentTime+=10,l();break;case"ArrowLeft":10>o.currentTime?o.currentTime=0:o.currentTime-=10,l();break;case"ArrowDown":.1>o.volume?(o.mute=!0,u.classList.add("fa-volume-mute"),u.classList.remove("fa-volume-up")):o.volume-=.1,l();break;case"ArrowUp":o.mute=!1,o.volume>.9?o.volume=1:o.volume+=.1,u.classList.add("fa-volume-up"),u.classList.remove("fa-volume-mute"),l()}}),$(e).on("mousemove",t=>{if(h){let s=$(e).find(".progress .track")[0],a=$(e).find(".progress")[0],l=a.getBoundingClientRect(),n=(t.clientX-l.left)/l.width*100;s.style.transition="unset",s.style.maxWidth=`${n}%`,setTimeout(()=>{s.style.transition=""},500)}}),$(e).find(".progress").on("mousemove",t=>{let s=$(e).find(".progress")[0].getBoundingClientRect(),a=(t.clientX-s.left)/s.width*100;$(e).find(".progress .hover")[0].style.maxWidth=`${a}%`;let l=a*o.duration/100,n=new Date(1e3*l).toISOString().substr(11,8);m.innerText=n,m.style.display="",m.style.left=`calc(${a}% - ${m.getBoundingClientRect().width/2}px)`}),$(e).find(".progress").on("mouseleave",()=>{m.style.display="none",$(e).find(".progress .hover")[0].style.maxWidth="0%"}),$(o).on("mousemove",()=>{o.paused||(r(),null!=i&&clearInterval(i),i=setInterval(()=>{o.paused||n()},3e3))}),$(e).on("mouseleave",()=>{o.paused||n(),null!=i&&clearInterval(i)})})}(),async function(){let a=document.createElement("div");a.classList.add("popup"),$("body")[0].appendChild(a),Array.from($("a")).forEach(e=>{let t=e.href;null!=t&&(t.startsWith(window.location.origin)||(e.title=`External Link: ${t}`,e.href="#",$(e).on("click",()=>{Navigate("@error","external",{src:t})})))}),Array.from($("toggle")).forEach(t=>{$(t).attr("value",null==$(t).attr("value")?"false":$(t).attr("value")),$(t).on("click",()=>{$(t).attr("value","false"==$(t).attr("value")),t.dispatchEvent(new e("true"==$(t).attr("value")))})}),Array.from($("slider")).forEach(e=>{function t(t){let a=$(e).find(".track")[0].getBoundingClientRect(),l=(t-a.left)/a.width*100;if(100>=l&&l>=0){$(e).find(".progress")[0].style.maxWidth=`${l}%`;let t=Math.round(c/100*l);null!=i&&clearTimeout(i),$(e).find(".preview")[0].classList.add("show"),$(e).find(".preview")[0].innerText=t,$(e).attr("value",t),e.dispatchEvent(new s(t)),i=setTimeout(()=>{$(e).find(".preview")[0].classList.remove("show")},2e3)}}let a=document.createElement("div");a.classList.add("track");let l=document.createElement("div");l.classList.add("progress");let n=document.createElement("span");n.classList.add("preview"),l.appendChild(n),a.appendChild(l),e.appendChild(a);let r=!1,i=null,o=$(e).attr("min"),c=$(e).attr("max"),d=$(e).attr("value");null==d&&(d=0),null==o&&(o=0),null==c&&(c=100),l.style.maxWidth=`${d/c*100}%`,$(e).on("mousedown",()=>{r=!0}),$(document).on("mouseup",()=>{r=!1}),$(document).on("mousemove",e=>{r&&t(e.clientX)}),$(e).on("click",e=>{t(e.clientX)})}),Array.from($("dropdown")).forEach(e=>{$(e).attr("tabindex",0),$(e).attr("name",$(e).find("dropdown-name")[0].innerText),Array.from($(e).find("dropdown-item")).forEach(s=>{$(s).on("click",()=>{if(s.classList.contains("selected"))s.classList.remove("selected"),$(e).find("dropdown-name")[0].innerText=$(e).attr("name"),e.dispatchEvent(new t(null));else{Array.from($(e).find("dropdown-item")).forEach(e=>{e.classList.remove("selected")});let a=$(s).attr("value");a=null==a?s.innerText:a,s.classList.add("selected"),$(e).find("dropdown-name")[0].innerText=s.innerText,e.dispatchEvent(new t(a))}e.blur()})}),$(e).on("dropdown",e=>{})})}()}();class e extends Event{constructor(e){super("toggle",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class t extends Event{constructor(e){super("dropdown",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class s extends Event{constructor(e){super("slide",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}}(()=>{let e=document.createElement("link");e.href="@libraries/blipjs/main.min.css",e.rel="stylesheet",$("head")[0].appendChild(e),(e=document.createElement("link")).rel="stylesheet",e.href="@libraries/fontawesome/css/all.min.css",$("head")[0].appendChild(e)}).call();class Popup{constructor(e){this.name=e,this.classes=[]}async open(){let e=$(".popup")[0],t=document.createElement("div");t.classList.add("popup-body"),this.classes.forEach(e=>t.classList.add(e)),$(e).on("click",e=>{e.target.classList.contains("popup")&&closeAllPopups()}),""!=e.innerHTML&&(await this.close(),e.innerHTML=""),$("html")[0].style.overflow="hidden",$("nav")[0].classList.add("hidden");let s=`@popups/${this.name}.html`,a=await $.get(s);return t.innerHTML=a,e.appendChild(t),await new Promise(e=>setTimeout(e,100)),e.classList.add("open"),t}async close(){await closeAllPopups()}}class CurtainPopup extends Popup{constructor(e){super(e),this.classes.push("curtain")}}class CurtainWithBorderPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","border")}}class CenteredLargeCurtainPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallCurtainPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","small")}}class CurtainWithTitlePopup extends CurtainPopup{constructor(e){super(e),this.classes.push("title")}}class CenteredLargeCurtainWithTitlePopup extends CurtainWithTitlePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallCurtainWithTitlePopup extends CurtainWithTitlePopup{constructor(e){super(e),this.classes.push("centered","small")}}class FadePopup extends Popup{constructor(e){super(e),this.classes.push("fade")}}class FadeWithBorderPopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","border")}}class CenteredLargeFadePopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallFadePopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","small")}}class FadeWithTitlePopup extends FadePopup{constructor(e){super(e),this.classes.push("title")}}class CenteredLargeFadeWithTitlePopup extends FadeWithTitlePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallFadeWithTitlePopup extends FadeWithTitlePopup{constructor(e){super(e),this.classes.push("centered","small")}}class LoadingScreen{constructor(e=null,t=null){$("html")[0].style.overflow="hidden",e=null==e?"Loading...":e,t=null==t?"This could take a moment...":t;let s=document.createElement("div");s.classList.add("loading");let a=document.createElement("h1");a.innerHTML=e;let l=document.createElement("p");l.innerHTML=t,l.classList.add("1");let n=document.createElement("span");n.classList.add("spinner"),n.style.width="100px",s.appendChild(a),s.appendChild(l),s.appendChild(n),$("body")[0].appendChild(s),setTimeout(()=>s.classList.add("active"),100),this.screen=s}async close(){$("html")[0].style.overflow="",this.screen.classList.remove("active"),await new Promise(e=>setTimeout(e,500)),this.screen.remove()}}var page={controller:null,view:null,model:{}},lastpage=null;BuildPage(),Navigate(null==page.controller?"home":page.controller,null==page.view?"index":page.view,page.model);