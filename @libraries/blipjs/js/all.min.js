/* LFInteractive LLC. All Rights Reserved */
async function InitPageLoad(){await async function(){await async function(){let e=Array.from($("page-item"));for(let t=0;t<e.length;t++){let s=e[t],l=`@pages/@shared/${$(s).attr("page")}.html`,a=await $.get(l);s.outerHTML=a}let t=Array.from($("section"));for(let e=0;e<t.length;e++){let s=t[e];if(""!=s.id&&null!=s.id){let e=`@pages/${page.controller}/@sections/${s.id}.html`,t=await $.get(e);s.innerHTML=t}}}()}()}function BuildPage(){window.location.search.replaceAll("?","").split("&").forEach(e=>{let t=e.split("=")[0],s=e.split("=")[1];switch(t){case"controller":page.controller=s;break;case"view":page.view=s;break;default:let e=`{"${t}": "${s}"}`;Object.assign(page.model,JSON.parse(e))}})}async function NavBack(){await Navigate(lastpage.controller,lastpage.view,lastpage.model)}async function Navigate(e="home",t="index",s={}){let l=new LoadingScreen;lastpage=page,page={controller:e,view:t,model:s},document.dispatchEvent(new NavigationStartEvent(page));let a=`@pages/${e}/${t}.html`,n=await $.get(a),o=Object.keys(s),r=Object.values(s),i="";for(let e=0;e<o.length;e++){let t=o[e],s=r[e];null!=t&&null!=s&&(i+=`&${t}=${s}`,n.toLowerCase().includes(`{${t.toLowerCase()}}`)&&(n=n.replaceAll("{src}",s)))}window.history.pushState("","",`?controller=${e}&view=${t}${i}`),$("main")[0].innerHTML=n,await InitPageLoad(),l.close(),document.dispatchEvent(new NavigationCompleteEvent(page))}async function closeAllPopups(){$("html")[0].style.overflow="",$("nav")[0].classList.remove("hidden");let e=$(".popup")[0];e.classList.remove("open"),await new Promise(e=>setTimeout(e,500)),e.innerHTML=""}function hslToHex(e,t,s){s/=100;const l=t*Math.min(s,1-s)/100,a=t=>{const a=(t+e/30)%12,n=s-l*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*n).toString(16).padStart(2,"0")};return`#${a(0)}${a(8)}${a(4)}`}function hexToHSL(e){let t=0,s=0,l=0;4==e.length?(t="0x"+e[1]+e[1],s="0x"+e[2]+e[2],l="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],s="0x"+e[3]+e[4],l="0x"+e[5]+e[6]),t/=255,s/=255,l/=255;let a=Math.min(t,s,l),n=Math.max(t,s,l),o=n-a,r=0,i=0,c=0;return r=0==o?0:n==t?(s-l)/o%6:n==s?(l-t)/o+2:(t-s)/o+4,0>(r=Math.round(60*r))&&(r+=360),c=(n+a)/2,"hsl("+r+","+(i=+(100*(i=0==o?0:o/(1-Math.abs(2*c-1)))).toFixed(1))+"%,"+(c=+(100*c).toFixed(1))+"%)"}$(document).on("nav-complete",()=>{Array.from($("colorpicker")).forEach(e=>{function t(){let t=hslToHex(p,$(f).attr("value"),$(g).attr("value"));$(e).find(".color-hex")[0].innerText=t,$(e).find(".color-hex").css("background",t),$(g).attr("value")>65?$(e).find(".color-hex").css("color","black"):$(e).find(".color-hex").css("color","white"),null!=r&&clearTimeout(r),r=setTimeout(()=>{$(e).attr("value",t)},1e3)}function s(e){let s=d.getBoundingClientRect(),l=(e-s.top)/s.height*100;l>100||0>l||(m.style.top=`${l}%`,p=Math.round(3.6*l),$(d).attr("value",p),u.style.setProperty("--hue",p),$(v).attr("value",p),t())}function l(e,s){let l=u.getBoundingClientRect(),a=(e-l.top)/l.height*100,n=(s-l.left)/l.width*100;if(!(a>100||0>a||n>100||0>n)){h.style.top=`calc(${a}% - calc(var(--size) / 2))`,h.style.left=`calc(${n}% - calc(var(--size) / 2))`;let e=Math.floor(getComputedStyle(h).left.replace("px","")/l.width*100),t=Math.floor(getComputedStyle(h).bottom.replace("px","")/l.height*100);$(f).attr("value",e),$(g).attr("value",t)}t()}let a=$(e).attr("name");null==a&&(a="");let n=$(e).attr("value");null==n&&(n="#000000"),n=hexToHSL(n).replace("hsl(","").replace(")","").replaceAll("%","").split(","),e.innerHTML=`<p class="1 title">${a}</p>\n                        <div class="body">\n                            <div class="picker">\n                                <div class="hue-sat-lat">\n                                    <div class="hue" value="${n[0]}">\n                                        <span class="cursor"></span>\n                                    </div>\n                                    <div class="sat-lat">\n                                        <span class="cursor"></span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="sliders">\n                                <slider value="${n[0]}" min="0" max="360" class="hue">Hue</slider>\n                                <slider value="${n[1]}" min="0" max="100" suffix="%" class="saturation">Saturation</slider>\n                                <slider value="${n[2]}" min="0" max="100" suffix="%" class="lightness">Lightness</slider>\n                                <slider value="100" min="0" max="100" suffix="%" class="alpha">Alpha</slider>\n                            </div>\n                        </div>\n                        <div class="grid bottom">\n                            <button class="secondary color-hsl">HSLA Sliders</button>\n                            <p class="3 copy color-hex" title="copy hex value">#ff00ff</p>\n                        </div>`;let o=!1,r=null,i=!1,c=!1,d=$(e).find(".picker .hue")[0],u=$(e).find(".picker .sat-lat")[0],p=$(d).attr("value");null==p&&(p=0);let m=$(d).find(".cursor")[0],h=$(u).find(".cursor")[0];m.style.top=`${p/360*100}%`,u.style.setProperty("--hue",p);let v=$(e).find("slider.hue")[0],f=$(e).find("slider.saturation")[0],g=$(e).find("slider.lightness")[0];$(v).attr("value",p),t(),$(u).on("mousedown",()=>{c=!0}),$(e).find(".copy.color-hex").on("click",()=>{let s=$(e).find(".copy.color-hex")[0];s.classList.add("active"),s.innerText="COPIED",setTimeout(()=>s.classList.remove("active"),250),setTimeout(()=>t(),2500)}),$(e).find(".color-slider-back").on("click",()=>{$(e).find(".body").css("left","0%")}),$(e).find(".color-hsl").on("click",()=>{o?($(e).find(".body").css("left","0%"),$(e).find(".color-hsl")[0].innerText="HSLA Sliders"):($(e).find(".body").css("left","-100%"),$(e).find(".color-hsl")[0].innerText="Picker"),o=!o}),$(document).on("mouseup",e=>{i&&(i=!1,s(e.clientY)),c&&(c=!1,l(e.clientY,e.clientX))}),$(d).on("mousedown",e=>{i=!0}),$(document).on("mousemove",e=>{i&&s(e.clientY),c&&l(e.clientY,e.clientX)}),$(v).on("slide",e=>{p=e.originalEvent.value,m.style.top=`${p/360*100}%`,u.style.setProperty("--hue",p),t()}),$(g).on("slide",e=>{t()}),$(f).on("slide",e=>{t()})})}),$(document).on("nav-complete",()=>{Array.from($("dropdown")).forEach(e=>{$(e).attr("tabindex",0),$(e).attr("name",$(e).find("dropdown-name")[0].innerText),Array.from($(e).find("dropdown-item")).forEach(t=>{$(t).on("click",()=>{if(t.classList.contains("selected"))t.classList.remove("selected"),$(e).find("dropdown-name")[0].innerText=$(e).attr("name"),e.dispatchEvent(new DropdownEvent(null));else{Array.from($(e).find("dropdown-item")).forEach(e=>{e.classList.remove("selected")});let s=$(t).attr("value");s=null==s?t.innerText:s,t.classList.add("selected"),$(e).find("dropdown-name")[0].innerText=t.innerText,e.dispatchEvent(new DropdownEvent(s))}e.blur()})}),$(e).on("dropdown",e=>{console.log(e.originalEvent.value)})})});class ToggleEvent extends Event{constructor(e){super("toggle",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class DropdownEvent extends Event{constructor(e){super("dropdown",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class SliderEvent extends Event{constructor(e){super("slide",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class NavigationCompleteEvent extends Event{constructor(e){super("nav-complete",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class NavigationStartEvent extends Event{constructor(e){super("nav-start",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}class NavigationProgressUpdateEvent extends Event{constructor(e){super("nav-progress-update",{bubbles:!0,cancelable:!0,composed:!0}),this.value=e}}$(document).on("nav-complete",()=>{Array.from($("a")).forEach(e=>{let t=e.href;null!=t&&(t.startsWith(window.location.origin)||(e.title=`External Link: ${t}`,e.href="#",$(e).on("click",()=>{Navigate("@error","external",{src:t})})))})});class LoadingScreen{constructor(e=null,t=null){$("html")[0].style.overflow="hidden",e=null==e?"Loading...":e,t=null==t?"This could take a moment...":t;let s=document.createElement("div");s.classList.add("loading");let l=document.createElement("h1");l.innerHTML=e;let a=document.createElement("p");a.innerHTML=t,a.classList.add("1");let n=document.createElement("span");n.classList.add("spinner"),n.style.width="100px",s.appendChild(l),s.appendChild(a),s.appendChild(n),$("body")[0].appendChild(s),setTimeout(()=>s.classList.add("active"),100),this.screen=s}async close(){$("html")[0].style.overflow="",this.screen.classList.remove("active"),await new Promise(e=>setTimeout(e,500)),this.screen.remove()}}(()=>{let e=document.createElement("link");e.href="@libraries/blipjs/css/all.min.css",e.rel="stylesheet",$("head")[0].appendChild(e),(e=document.createElement("link")).rel="stylesheet",e.href="@libraries/fontawesome/css/all.min.css",$("head")[0].appendChild(e)}).call();let navLoaded=!1;$(document).on("nav-complete",()=>{if(!navLoaded){navLoaded=!0;let e=$("nav.fixed.animated")[0];null!=e&&(window.scrollY>5?e.classList.add("collapsed"):e.classList.remove("collapsed"),$(document).on("scroll",()=>{window.scrollY>5?e.classList.add("collapsed"):e.classList.remove("collapsed")}))}});var page={controller:null,view:null,model:{}},lastpage=null;BuildPage(),Navigate(null==page.controller?"home":page.controller,null==page.view?"index":page.view,page.model);let popupLoaded=!1;$(document).on("nav-complete",()=>{if(!popupLoaded){popupLoaded=!0;let e=document.createElement("div");e.classList.add("popup"),$("body")[0].appendChild(e)}});class Popup{constructor(e){this.name=e,this.classes=[]}async open(){let e=$(".popup")[0],t=document.createElement("div");t.classList.add("popup-body"),this.classes.forEach(e=>t.classList.add(e)),$(e).on("click",e=>{e.target.classList.contains("popup")&&closeAllPopups()}),""!=e.innerHTML&&(await this.close(),e.innerHTML=""),$("html")[0].style.overflow="hidden",$("nav")[0].classList.add("hidden");let s=`@popups/${this.name}.html`,l=await $.get(s);return t.innerHTML=l,e.appendChild(t),await new Promise(e=>setTimeout(e,100)),e.classList.add("open"),t}async close(){await closeAllPopups()}}class CurtainPopup extends Popup{constructor(e){super(e),this.classes.push("curtain")}}class CurtainWithBorderPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","border")}}class CenteredLargeCurtainPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallCurtainPopup extends CurtainPopup{constructor(e){super(e),this.classes.push("centered","small")}}class CurtainWithTitlePopup extends CurtainPopup{constructor(e){super(e),this.classes.push("title")}}class CenteredLargeCurtainWithTitlePopup extends CurtainWithTitlePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallCurtainWithTitlePopup extends CurtainWithTitlePopup{constructor(e){super(e),this.classes.push("centered","small")}}class FadePopup extends Popup{constructor(e){super(e),this.classes.push("fade")}}class FadeWithBorderPopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","border")}}class CenteredLargeFadePopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallFadePopup extends FadePopup{constructor(e){super(e),this.classes.push("centered","small")}}class FadeWithTitlePopup extends FadePopup{constructor(e){super(e),this.classes.push("title")}}class CenteredLargeFadeWithTitlePopup extends FadeWithTitlePopup{constructor(e){super(e),this.classes.push("centered","large")}}class CenteredSmallFadeWithTitlePopup extends FadeWithTitlePopup{constructor(e){super(e),this.classes.push("centered","small")}}$(document).on("nav-complete",()=>{Array.from($("slider")).forEach(e=>{function t(t){let s=$(e).find(".track")[0].getBoundingClientRect(),l=(t-s.left)/s.width*100;if(100>=l&&l>=0){$(e).find(".progress")[0].style.maxWidth=`${l}%`;let t=Math.round(d/100*l);null!=i&&clearTimeout(i),$(e).find(".preview")[0].classList.add("show"),$(e).find(".preview")[0].innerText=`${t}${o}`,$(e).attr("value",t),e.dispatchEvent(new SliderEvent(t)),i=setTimeout(()=>{$(e).find(".preview")[0].classList.remove("show")},2e3)}}let s=document.createElement("span");s.classList.add("name"),s.innerHTML=e.innerHTML,e.innerHTML="";let l=document.createElement("div");l.classList.add("track");let a=document.createElement("div");a.classList.add("progress");let n=document.createElement("span");n.classList.add("preview"),a.appendChild(n),l.appendChild(a),e.appendChild(s),e.appendChild(l);let o=$(e).attr("suffix");null==o&&(o=""),$(e).attr("tabindex",0);let r=!1,i=null,c=$(e).attr("min"),d=$(e).attr("max"),u=$(e).attr("value");null==u&&(u=0),null==c&&(c=0),null==d&&(d=100),a.style.maxWidth=`${u/d*100}%`;setInterval(()=>{u=$(e).attr("value"),a.style.maxWidth=`${u/d*100}%`},200);$(e).on("mousedown",()=>{r=!0}),$(document).on("mouseup",()=>{r=!1}),$(document).on("mousemove",e=>{r&&t(e.clientX)}),$(e).on("click",e=>{t(e.clientX)})})}),$(document).on("nav-complete",()=>{Array.from($("toggle")).forEach(e=>{$(e).attr("value",null==$(e).attr("value")?"false":$(e).attr("value")),$(e).on("click",()=>{$(e).attr("value","false"==$(e).attr("value")),e.dispatchEvent(new ToggleEvent("true"==$(e).attr("value")))})})}),$(document).on("nav-complete",()=>{Array.from($("video-player")).forEach(e=>{let t=$(e).attr("src"),s=$(e).attr("id"),l=$(e).attr("poster"),a=$(e).attr("class"),n=document.createElement("div");n.classList.add("video-player"),null!=a&&n.classList.add(a.split(" ")),null!=s&&(n.id=s);let o=document.createElement("video");o.src=t,null!=l&&(o.poster=l);let r=document.createElement("div");r.classList.add("controls");let i=document.createElement("div");i.classList.add("progress");let c=document.createElement("span");c.classList.add("preview");let d=document.createElement("span");d.classList.add("track");let u=document.createElement("span");u.classList.add("hover"),i.appendChild(c),i.appendChild(d),i.appendChild(u);let p=document.createElement("div");p.classList.add("row","control-buttons");let m=document.createElement("i");m.classList.add("play"),m.title="play/pause";let h=document.createElement("p");h.classList.add("4","video-track-timestamp");let v=document.createElement("span");v.classList.add("current-timestamp");let f=document.createElement("span");f.classList.add("total-timestamp");let g=document.createElement("i");g.classList.add("mute-button","fa-solid","fa-volume-up"),g.title="mute/unmute";let L=document.createElement("i");L.classList.add("fullscreen-btn","fa-solid","fa-expand"),L.title="toggle fullscreen",h.appendChild(v),h.append("/"),h.appendChild(f),p.appendChild(m),p.appendChild(h),r.appendChild(i),r.appendChild(p),r.appendChild(g),r.appendChild(L),n.appendChild(o),n.appendChild(r),e.outerHTML=n.outerHTML}),Array.from($(".video-player")).forEach(e=>{function t(){document.fullscreen?document.exitFullscreen():e.requestFullscreen()}function s(){d.paused?l():(a(),o())}function l(){d.play(),u.classList.add("pause"),u.classList.remove("play"),h=setInterval(()=>o(),100),c=setInterval(()=>{r()},1e3)}function a(){d.pause(),u.classList.add("play"),u.classList.remove("pause"),i(),clearInterval(h),clearInterval(c)}function n(){a(),d.currentTime=0,o()}function o(){try{d.currentTime==d.duration&&(n(),console.log($(e).attr("loop")),null!=$(e).attr("loop")&&l());let t=new Date(1e3*d.currentTime).toISOString().substr(11,8),s=new Date(1e3*d.duration).toISOString().substr(11,8),a=d.currentTime/d.duration*100;$(e).find(".current-timestamp")[0].innerText=t,$(e).find(".total-timestamp")[0].innerText=s,f||($(e).find(".progress .track")[0].style.maxWidth=`${a}%`)}catch{}}function r(){e.classList.remove("show")}function i(){e.classList.add("show")}$(e).attr("tabindex",0);let c=null,d=$(e).find("video")[0];d.paused&&i();let u=$(e).find(".play")[0],p=$(e).find(".fullscreen-btn")[0],m=$(e).find(".mute-button")[0],h=setInterval(()=>o(),500),v=$(e).find(".preview")[0],f=!1;v.style.display="none",o(),$(u).on("click",()=>s()),$(d).on("click",()=>s()),$(d).on("dblclick",()=>t()),$(p).on("click",()=>t()),$(p).on("click",()=>t()),$(m).on("click",()=>{d.muted=!d.muted,d.muted?(m.classList.add("fa-volume-mute"),m.classList.remove("fa-volume-up")):(m.classList.add("fa-volume-up"),m.classList.remove("fa-volume-mute"))}),$(e).contextmenu(e=>{e.preventDefault()}),$(e).find(".progress").on("mousedown",()=>{f=!0}),$(document).on("mouseup",t=>{if(f){f=!1;let s=$(e).find(".progress")[0].getBoundingClientRect(),l=(t.clientX-s.left)/s.width*100,a=l*d.duration/100;d.currentTime=a,$(e).find(".progress .track")[0].style.transition="unset",$(e).find(".progress .track")[0].style.maxWidth=`${l}%`,setTimeout(()=>{$(e).find(".progress .track")[0].style.transition=""},500)}}),$(document).on("mousemove",t=>{if(f){let s=$(e).find(".progress .track")[0],l=$(e).find(".progress")[0].getBoundingClientRect(),a=(t.clientX-l.left)/l.width*100;s.style.transition="unset",s.style.maxWidth=`${a}%`,setTimeout(()=>{s.style.transition=""},500),$(e).find(".progress .hover")[0].style.maxWidth=`${a}%`;let n=a*d.duration/100,o=new Date(1e3*n).toISOString().substr(11,8);v.innerText=o,v.style.display="",v.style.left=`calc(${a}% - ${v.getBoundingClientRect().width/2}px)`}}),$(e).on("keydown",e=>{switch(e.preventDefault(),e.key){case" ":s();break;case"f":t();break;case"m":d.muted=!d.muted,d.muted?(m.classList.add("fa-volume-mute"),m.classList.remove("fa-volume-up")):(m.classList.add("fa-volume-up"),m.classList.remove("fa-volume-mute"));break;case"ArrowRight":d.currentTime>d.duration-10?n():d.currentTime+=10,o();break;case"ArrowLeft":10>d.currentTime?d.currentTime=0:d.currentTime-=10,o();break;case"ArrowDown":.1>d.volume?(d.mute=!0,m.classList.add("fa-volume-mute"),m.classList.remove("fa-volume-up")):d.volume-=.1,console.log(d.volume),o();break;case"ArrowUp":d.mute=!1,d.volume>.9?d.volume=1:d.volume+=.1,console.log(d.volume),m.classList.add("fa-volume-up"),m.classList.remove("fa-volume-mute"),o()}}),$(e).find(".progress").on("mouseleave",()=>{v.style.display="none",$(e).find(".progress .hover")[0].style.maxWidth="0%"}),$(d).on("mousemove",()=>{d.paused||(i(),null!=c&&clearInterval(c),c=setInterval(()=>{d.paused||r()},3e3))}),$(e).on("mouseleave",()=>{d.paused||r(),null!=c&&clearInterval(c)})})});