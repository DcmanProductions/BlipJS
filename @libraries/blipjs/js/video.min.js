/* LFInteractive LLC. All Rights Reserved */
$(document).on("nav-complete",()=>{Array.from($("video-player")).forEach(e=>{new VideoPlayer({allowAudioModulation:null!=$(e).attr("allowAudioModulation"),allowFullscreen:null!=$(e).attr("allowFullscreen"),allowSeek:null!=$(e).attr("allowSeek"),loop:null!=$(e).attr("loop"),allowKeyboardShortcuts:null!=$(e).attr("allowKeyboardShortcuts"),id:e.id,classes:e.classList,poster:$(e).attr("poster"),header:{title:$(e).attr("title"),subtitle:$(e).attr("subtitle"),date:new Date(Number.parseInt($(e).attr("year")),Number.parseInt($(e).attr("month")),Number.parseInt($(e).attr("day")))}})})});class VideoPlayer{defaultOptions={id:`player-${btoa((new Date).getTime()+"").replaceAll("==","")}`,classes:[""],poster:"",allowFullscreen:!0,allowAudioModulation:!0,allowSeek:!0,allowKeyboardShortcuts:!0,loop:!1,header:{title:"",subtitle:"",date:new Date},speedOptions:[.25,.5,.75,1,1.25,1.5,1.75,2],qualityOptions:[{src:"",name:"",width:0,height:0,bitrate:0,default:!1}]};constructor(e=this.defaultOptions){if(null!=e.qualityOptions&&0!=e.qualityOptions.length){if(1==e.qualityOptions.length)this.source=e.qualityOptions[0];else{for(let t=0;t<e.qualityOptions.length;t++)if(e.qualityOptions[t].default){this.source=e.qualityOptions[t];break}null==this.source&&(this.source=e.qualityOptions[0])}e!==this.defaultOptions&&(e.allowFullscreen=null==e.allowFullscreen?this.defaultOptions.allowFullscreen:e.allowFullscreen,e.id=null==e.id?this.defaultOptions.id:e.id,e.allowAudioModulation=null==e.allowAudioModulation?this.defaultOptions.allowAudioModulation:e.allowAudioModulation,e.allowSeek=null==e.allowSeek?this.defaultOptions.allowSeek:e.allowSeek,e.loop=null==e.loop?this.defaultOptions.loop:e.loop,e.speedOptions=null==e.speedOptions?this.defaultOptions.speedOptions:e.speedOptions,null!=e.header?(e.header.title=null==e.header.title?this.defaultOptions.header.title:e.header.title,e.header.date=null==e.header.date?this.defaultOptions.header.date:e.header.date):e.header=this.defaultOptions.header,this.options=e)}else console.error("Video element requires at least one quality option")}buildDOM(){let e=this.source.src,t=this.options.id,l=this.options.poster,a=document.createElement("div");a.classList.add("video-player"),a.classList.add(this.options.classes),a.id=t;let i=document.createElement("video");i.src=e,null!=l&&(i.poster=l);let o=document.createElement("div");o.classList.add("controls");let s=document.createElement("div");s.classList.add("progress");let d=document.createElement("span");d.classList.add("preview");let n=document.createElement("span");n.classList.add("track");let p=document.createElement("span");p.classList.add("hover");let u=document.createElement("div");u.classList.add("row","control-buttons");let r=document.createElement("i");r.classList.add("play"),r.title="play/pause";let c=document.createElement("p");c.classList.add("4","video-track-timestamp");let h=document.createElement("span");h.classList.add("current-timestamp");let m=document.createElement("span");m.classList.add("total-timestamp");let w=document.createElement("i");w.classList.add("mute-button","fa-solid","fa-volume-up"),w.title="mute/unmute";let O=document.createElement("i");O.classList.add("fullscreen-btn","fa-solid","fa-expand"),O.title="toggle fullscreen";let y=document.createElement("i");y.classList.add("options-btn","fa-solid","fa-gear"),y.title="options",$(y).attr("tabindex",0);let f=document.createElement("div");f.classList.add("options-body");let b=document.createElement("div");b.classList.add("speed-option","video-option"),b.innerText="Speed (normal)",b.title="change video playback speed";let v=document.createElement("div");v.classList.add("quality-option","video-option"),v.innerText="Quality (1080p)",v.title="change video playback quality",f.appendChild(v),f.appendChild(b),y.appendChild(f),s.appendChild(d),s.appendChild(n),s.appendChild(p),c.appendChild(h),c.append("/"),c.appendChild(m),u.appendChild(r),this.options.allowAudioModulation&&u.appendChild(w),u.appendChild(c),o.appendChild(s),o.appendChild(u),this.options.qualityOptions.length>1&&this.options.speedOptions!=[]&&o.appendChild(y),this.options.allowFullscreen&&o.appendChild(O),a.appendChild(i),a.appendChild(o),a.setAttribute("tabindex","0"),this.player=a}buildOptions(){}buildSpeedOptions(){}buildResolutionOptions(){}buildEventListeners(){}}